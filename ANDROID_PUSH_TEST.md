# Тестирование Push Уведомлений на Android

## Подготовка для тестирования

### 1. Убедитесь, что устройство подключено
```bash
flutter devices
# Должно показать: M2003J15SC (212fd9e20410) • android-arm64 • Android 11 (API 30)
```

### 2. Запуск приложения на Android
```bash
flutter run -d 212fd9e20410
```

## Тестирование локальных уведомлений

### 1. Быстрый тест через меню
1. Откройте приложение на Android устройстве
2. Нажмите три точки в правом верхнем углу
3. Выберите "Тест уведомления"
4. Должно появиться уведомление с текстом "Уведомления работают корректно!"

### 2. Тест периодических напоминаний (10 секунд)
1. Нажмите "+" для создания новой задачи
2. Введите название: "Тест 10 сек"
3. Введите описание: "Проверка быстрых напоминаний"
4. Включите переключатель "Включить напоминания"
5. Выберите чип "10 сек"
6. Нажмите "Добавить"
7. **Результат**: Каждые 10 секунд будет приходить уведомление

## Получение FCM токена

После запуска приложения на Android устройстве:
1. Откройте логи в терминале
2. Найдите строку: `flutter: FCM Token: [длинная строка]`
3. Скопируйте этот токен для тестирования push уведомлений

## Тестирование Push уведомлений

### 1. Обновите скрипт test_push.sh
```bash
# Откройте файл test_push.sh
# Замените YOUR_DEVICE_TOKEN на реальный FCM токен из логов
FCM_TOKEN="реальный_токен_из_логов"
```

### 2. Отправьте тестовое push уведомление
```bash
./test_push.sh
```

### 3. Альтернативный способ через curl
```bash
curl -X POST \
     -H "Authorization: key=AAAA7x5qPCI:APA91bFzbQCFOWCNGcvH8E-wJ2g1C7oRPo9MfWJp3rvs_r3DUvl7bqROFdkPK2eGWH6E8Lzo_tpvnD8LsOJ9FiNb4YcFrOWXz4q8B9zL5rS_z1vQ7RfT6Q8w5D3K" \
     -H "Content-Type: application/json" \
     -d '{
       "to": "ВАШ_FCM_ТОКЕН_ЗДЕСЬ",
       "notification": {
         "title": "Тест Push уведомления",
         "body": "Проверка с Android устройства!"
       },
       "data": {
         "test": "true"
       }
     }' \
     https://fcm.googleapis.com/fcm/send
```

## Ожидаемые результаты

### Локальные уведомления
- ✅ Должны работать немедленно
- ✅ Показываются в панели уведомлений Android
- ✅ Периодические напоминания каждые 10 секунд

### Push уведомления
- ✅ FCM токен должен появиться в логах
- ✅ Push уведомления должны приходить на устройство
- ✅ Работают даже когда приложение свернуто

## Отладка проблем

### Если FCM токен не появляется
1. Проверьте подключение к интернету
2. Убедитесь, что Google Play Services установлены
3. Перезапустите приложение

### Если push уведомления не приходят
1. Проверьте, что FCM токен правильный
2. Убедитесь, что Server Key правильный
3. Проверьте разрешения на уведомления в настройках Android

### Проверка логов Android
```bash
# В отдельном терминале для просмотра логов
flutter logs -d 212fd9e20410
```
